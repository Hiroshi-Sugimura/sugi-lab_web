<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WebBLE Central - Peripheral Test Tool</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <h1>🔵 WebBLE Central</h1>
        <p class="subtitle">
            BLE Peripheral (UART) のテストツール
        </p>

        <!-- 接続状態 -->
        <div class="control-section">
            <h2>📡 接続状態</h2>
            <div id="connectionStatus" class="status disconnected">
                未接続
            </div>
            <div id="deviceInfo" style="display: none;">
                <strong>接続中デバイス:</strong> <span id="connectedDeviceName"></span><br>
                <strong>Device ID:</strong> <span id="connectedDeviceId"></span>
            </div>
        </div>

        <!-- デバイス検索・接続 -->
        <div class="control-section">
            <h2>🔍 デバイス検索・接続</h2>
            <div class="button-group">
                <button id="scanBtn" class="btn-primary">デバイスをスキャン</button>
            </div>

            <div id="deviceList" class="device-list" style="display: none;"></div>
            <div id="scanStatus" style="display: none;"></div>

            <div class="button-group">
                <button id="connectBtn" class="btn-success" disabled>選択したデバイスに接続</button>
                <button id="disconnectBtn" class="btn-danger" disabled>切断</button>
            </div>
        </div>

        <!-- サービス・特性 -->
        <div class="control-section">
            <h2>⚙️ サービス・特性</h2>
            <div class="button-group">
                <button id="discoverBtn" class="btn-secondary" disabled>サービスを探索</button>
                <button id="refreshServicesBtn" class="btn-secondary" disabled>サービス一覧を更新</button>
            </div>

            <div id="servicesList" class="characteristics-list" style="display: none;"></div>
        </div>

        <!-- データ送受信 -->
        <div class="control-section">
            <h2>📡 データ送受信</h2>

            <!-- 設定 -->
            <div class="setting-group">
                <label>
                    <input type="checkbox" id="ignoreEcho" checked>
                    エコーバックを無視する（送信データと同じ内容の受信データを非表示）
                </label>
            </div>

            <div class="input-group">
                <label for="writeData">送信データ:</label>
                <input type="text" id="writeData" placeholder="送信するデータを入力 (例: Hello BLE!)">
                <button id="writeBtn" class="btn-primary" disabled>送信</button>
            </div>

            <div class="input-group">
                <label for="writeHex">HEX送信:</label>
                <input type="text" id="writeHex" placeholder="HEXデータを入力 (例: 48656C6C6F)">
                <button id="writeHexBtn" class="btn-primary" disabled>HEX送信</button>
            </div>

            <div class="button-group">
                <button id="readBtn" class="btn-secondary" disabled>データを読取</button>
                <button id="subscribeBtn" class="btn-secondary" disabled>通知を開始</button>
                <button id="unsubscribeBtn" class="btn-secondary" disabled>通知を停止</button>
            </div>

            <div id="receivedData" class="data-display" style="display: none;">
                <strong>受信データ:</strong><br>
                <div id="dataContent"></div>
            </div>
        </div>

        <!-- ログ -->
        <div class="control-section">
            <h2>📋 ログ</h2>
            <div class="button-group">
                <button id="clearLogBtn" class="btn-secondary">ログをクリア</button>
            </div>
            <div id="logArea" class="log-area"></div>
        </div>
    </div>

    <script src="main.js"></script>
</body>
</html>
